<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>django-social-auth is dead, long live to python-social-auth</title>

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="django-social-auth is dead, long live to python-social-auth" />
    <meta name="author" content="Matías Aguirre y Martin Santos" />

    <link href="http://fonts.googleapis.com/css?family=Open+Sans:300italic,600italic,700italic,300,400,800" rel="stylesheet" type="text/css">
    <link rel="stylesheet/less" type="text/css" href="less/styles.less">
    <link rel="stylesheet" href="css/font-awesome/css/font-awesome.min.css">
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section id="cover">
          <h1>django-social-auth</h1>
          <p>is dead, long live to</p>
          <h1>python-social-auth</h1>

          <p id="github-handles">
            <span>Martín Santos <br/> <a href="https://github.com/san-mate"><i class="fa fa-github"></i> san-mate</a></span>
            <span>Matías Aguirre <br/> <a href="https://github.com/omab"><i class="fa fa-github"></i> omab</a></span>
          </p>
        </section>

        <section class="dsa">
          <h1>Django Social Auth - Propósito</h1>

          <p>
            Solucionar el problema del autenticado y autorización mediante el uso de
            redes sociales que soportan los protocolos OAuth1, OAuth2 y OpenId.
          </p>

          <p>
            Surge como resultado de horas de frustración al intentar utilizar otras
            soluciones disponibles.
          </p>
        </section>

        <section class="dsa">
          <h1>Django Social Auth - Features</h1>
          <ul>
            <li>Django ORM y Mongoengine</li>
            <li>Datos básicos del usuario</li>
            <li>Múltiple cuentas sociales asociadas a un único usuario</li>
            <li>Modelo de usuario configurable</li>
            <li>Pipeline extensible</li>
            <li>Variedad de sitios sociales soportados</li>
          </ul>
        </section>

        <section class="dsa">
          <h1>Django Social Auth - Números</h1>
          <ul>
            <li>Nace 8/11/2010 y muere el 5/10/2013</li>
            <li>Un total de 1605 commits</li>
            <li>9614 líneas de código</li>
            <li>Aportes de 165 personas</li>
            <li>751 issues cerrados</li>
            <li>674 forks</li>
            <li>1990 stars</li>
            <li>116 watchers</li>
          </ul>
        </section>

        <section class="backends">
          <h1>Backends</h1>
          <span>
            <img src="img/logos/facebook.png" alt="facebook" title="facebook" />
            <img src="img/logos/google.png" alt="google" title="google" />
            <img src="img/logos/twitter.png" alt="twitter" title="twitter" />
            <img src="img/logos/yahoo.png" alt="yahoo" title="yahoo" />
          </span>

          <span class="fragment">
            <img src="img/logos/appsfuel.png" alt="appsfuel" title="appsfuel" />
            <img src="img/logos/bitbucket.png" alt="bitbucket" title="bitbucket" />
            <img src="img/logos/disqus.png" alt="disqus" title="disqus" />
            <img src="img/logos/dropbox.png" alt="dropbox" title="dropbox" />
            <img src="img/logos/evernote.png" alt="evernote" title="evernote" />
            <img src="img/logos/exacttarget_hubExchange.png" alt="exacttarget_hubExchange" title="exacttarget_hubExchange" />
            <img src="img/logos/fedora.png" alt="fedora" title="fedora" />
            <img src="img/logos/fitbit.png" alt="fitbit" title="fitbit" />
            <img src="img/logos/flickr.png" alt="flickr" title="flickr" />
            <img src="img/logos/foursquare.png" alt="foursquare" title="foursquare" />
            <img src="img/logos/github.png" alt="github" title="github" />
            <img src="img/logos/instagram.png" alt="instagram" title="instagram" />
            <img src="img/logos/linkedin.png" alt="linkedin" title="linkedin" />
            <img src="img/logos/live.png" alt="live" title="live" />
            <img src="img/logos/livejournal.png" alt="livejournal" title="livejournal" />
            <img src="img/logos/douban.png" alt="douban" title="douban" />
            <img src="img/logos/mailru.png" alt="mailru" title="mailru" />
            <img src="img/logos/mixcloud.png" alt="mixcloud" title="mixcloud" />
            <img src="img/logos/odnoklassniki.png" alt="odnoklassniki" title="odnoklassniki" />
            <img src="img/logos/orkut.png" alt="orkut" title="orkut" />
            <img src="img/logos/persona.png" alt="persona" title="persona" />
            <img src="img/logos/shopify.png" alt="shopify" title="shopify" />
            <img src="img/logos/skyrock.png" alt="skyrock" title="skyrock" />
            <img src="img/logos/stackoverflow.png" alt="stackoverflow" title="stackoverflow" />
            <img src="img/logos/stocktwits.png" alt="stocktwits" title="stocktwits" />
            <img src="img/logos/trello.png" alt="trello" title="trello" />
            <img src="img/logos/twilio.png" alt="twilio" title="twilio" />
            <img src="img/logos/vk.png" alt="vk" title="vk" />
            <img src="img/logos/weibo.png" alt="weibo" title="weibo" />
            <img src="img/logos/yandex.png" alt="yandex" title="yandex" />
          </span>
        </section>

        <section id="is-dead">
          <h1>Django Social Auth - Su muerte</h1>
          <span>
            <span class="fragment">5/10/2013</span>
            <img id="rip" src="img/rip.png" />
          </span>
        </section>

        <section class="psa">
          <h1>Python Social Auth - Propósito</h1>
          <p>
            Realizar lo mismo que django-social-auth, pero mejor y siendo una solución
            multi-framework.
          </p>

          <p>
            La idea surge como el comentario de un amigo <strike>luego de unas
            cervezas</strike>, y la implementación se vuelve realidad meses
            después cuando empiezo a utilizar otros frameworks aparte de Django.
          </p>
        </section>

        <section class="psa">
          <h1>Python Social Auth - Features</h1>
          <ul>
            <li>Múltiple framewors (Django, Flask, Pyramid, Webpy ...)</li>
            <li>Pipeline extensible</li>
            <li>Login con username y email</li>
            <li>Mayor variedad de sitios sociales soportados</li>
          </ul>
        </section>

        <section class="psa">
          <h1>Python Social Auth - Números</h1>
          <ul>
            <li>Nace el 12 de Diciembre de 2012</li>
            <li>598 commits</li>
            <li>11953 líneas de código</li>
            <li>19 aportes</li>
            <li>57 issues cerrados</li>
            <li>54 forks</li>
            <li>314 stars</li>
            <li>25 watchers</li>
          </ul>
        </section>

        <section class="backends">
          <h1>Backends</h1>
          <img src="img/logos/facebook.png" alt="facebook" title="facebook" />
          <img src="img/logos/google.png" alt="google" title="google" />
          <img src="img/logos/twitter.png" alt="twitter" title="twitter" />
          <img src="img/logos/yahoo.png" alt="yahoo" title="yahoo" />
          <img src="img/logos/appsfuel.png" alt="appsfuel" title="appsfuel" />
          <img src="img/logos/bitbucket.png" alt="bitbucket" title="bitbucket" />
          <img src="img/logos/disqus.png" alt="disqus" title="disqus" />
          <img src="img/logos/dropbox.png" alt="dropbox" title="dropbox" />
          <img src="img/logos/evernote.png" alt="evernote" title="evernote" />
          <img src="img/logos/exacttarget_hubExchange.png" alt="exacttarget_hubExchange" title="exacttarget_hubExchange" />
          <img src="img/logos/fedora.png" alt="fedora" title="fedora" />
          <img src="img/logos/fitbit.png" alt="fitbit" title="fitbit" />
          <img src="img/logos/flickr.png" alt="flickr" title="flickr" />
          <img src="img/logos/foursquare.png" alt="foursquare" title="foursquare" />
          <img src="img/logos/github.png" alt="github" title="github" />
          <img src="img/logos/instagram.png" alt="instagram" title="instagram" />
          <img src="img/logos/linkedin.png" alt="linkedin" title="linkedin" />
          <img src="img/logos/live.png" alt="live" title="live" />
          <img src="img/logos/livejournal.png" alt="livejournal" title="livejournal" />
          <img src="img/logos/douban.png" alt="douban" title="douban" />
          <img src="img/logos/mailru.png" alt="mailru" title="mailru" />
          <img src="img/logos/mixcloud.png" alt="mixcloud" title="mixcloud" />
          <img src="img/logos/odnoklassniki.png" alt="odnoklassniki" title="odnoklassniki" />
          <img src="img/logos/orkut.png" alt="orkut" title="orkut" />
          <img src="img/logos/persona.png" alt="persona" title="persona" />
          <img src="img/logos/shopify.png" alt="shopify" title="shopify" />
          <img src="img/logos/skyrock.png" alt="skyrock" title="skyrock" />
          <img src="img/logos/stackoverflow.png" alt="stackoverflow" title="stackoverflow" />
          <img src="img/logos/stocktwits.png" alt="stocktwits" title="stocktwits" />
          <img src="img/logos/trello.png" alt="trello" title="trello" />
          <img src="img/logos/twilio.png" alt="twilio" title="twilio" />
          <img src="img/logos/vk.png" alt="vk" title="vk" />
          <img src="img/logos/weibo.png" alt="weibo" title="weibo" />
          <img src="img/logos/yandex.png" alt="yandex" title="yandex" />



          <span class="fragment">
            <img src="img/logos/amazon.png" alt="amazon" title="amazon" />
            <img src="img/logos/angellist.png" alt="angellist" title="angellist" />
            <img src="img/logos/aol.png" alt="aol" title="aol" />
            <img src="img/logos/behance.png" alt="behance" title="behance" />
            <img src="img/logos/belgiumeid.png" alt="belgiumeid" title="belgiumeid" />
            <img src="img/logos/box.png" alt="box" title="box" />
            <img src="img/logos/dailymotion.png" alt="dailymotion" title="dailymotion" />
            <img src="img/logos/fedora.png" alt="fedora" title="fedora" />
            <img src="img/logos/jawbone.png" alt="jawbone" title="jawbone" />
            <img src="img/logos/mendeley.png" alt="mendeley" title="mendeley" />
            <img src="img/logos/opensuse.png" alt="opensuse" title="opensuse" />
            <img src="img/logos/podio.png" alt="podio" title="podio" />
            <img src="img/logos/rdio.png" alt="rdio" title="rdio" />
            <img src="img/logos/readability.png" alt="readability" title="readability" />
            <img src="img/logos/reddit.png" alt="reddit" title="reddit" />
            <img src="img/logos/soundcloud.png" alt="soundcloud" title="soundcloud" />
            <img src="img/logos/steam.png" alt="steam" title="steam" />
            <img src="img/logos/stripe.png" alt="stripe" title="stripe" />
            <img src="img/logos/thisismyjam.png" alt="thisismyjam" title="thisismyjam" />
            <img src="img/logos/tripit.png" alt="tripit" title="tripit" />
            <img src="img/logos/tumblr.png" alt="tumblr" title="tumblr" />
            <img src="img/logos/xing.png" alt="xing" title="xing" />
            <img src="img/logos/yammer.png" alt="yammer" title="yammer" />
          </span>
        </section>

        <section id="video">
          <h1>Python Social Auth en acción</h1>
          <!-- video -->
          <video class="stretch" controls>
            <source src="example.ogv" type="video/ogg">
          </video>
        </section>

        <section id="requests">
          <h1>Detrás de cámaras</h1>
          <img src="img/requests.png">
        </section>

        <section>
          <section id="install">
            <h1>Tutorial (Django)</h1>
            <div>
              <span class="fragment">$ pip</span>
              <span class="fragment">install</span>
              <span class="fragment">python-social-auth</span>
            </div>
          </section>

          <section>
            <h1>Registro de una aplicación</h1>
            <img src="img/google-console.png">
          </section>

          <section id="settings">
            <h1>settings.py</h1>
            <pre class="installed-apps"><code data-trim class="python">
INSTALLED_APPS = (
    ...
    'social.apps.django_app.default',
    ...
)
            </code></pre>

            <pre class="fragment"><code data-trim class="python">
AUTHENTICATION_BACKENDS = (
    'social.backends.google.GoogleOAuth2',
    'social.backends.github.GithubOAuth2',
    ...
    'django.contrib.auth.backends.ModelBackend',
)
            </code></pre>

            <pre class="fragment"><code data-trim class="python">
SOCIAL_AUTH_LOGIN_REDIRECT_URL = '/logged-in/'
SOCIAL_AUTH_LOGIN_ERROR_URL = '/login-error/'
            </code></pre>

            <pre class="fragment"><code data-trim class="python">
SOCIAL_AUTH_GOOGLE_OAUTH2_KEY = 'foobar'
SOCIAL_AUTH_GOOGLE_OAUTH2_SECRET = 'bazqux'
            </code></pre>
          </section>

          <section>
            <h1>urls.py</h1>
            <pre><code data-trim class="python">
urlpatterns = patterns('',
    ...
    url('', include('social.apps.django_app.urls', namespace='social'))
    ...
)
            </code></pre>
          </section>

          <section>
            <h1>login.html</h1>
            <pre><code data-trim>
&lt;a href="{% url 'social:begin' "facebook" %}"&gt;Login with Facebook&lt;/a&gt;
            </code></pre>
          </section>

          <!--como usar python social auth-->
          <!--screens de las apps-->
          <!--codigo-->
        </section>

        <section id="strategy-storage">
          <h1>Strategies & Storages</h1>

          <div class="fragment">
            <h2>Strategy</h2>
            <p>
              Es la interfáz entre el framework y la aplicación.  Definiendo
              9 métodos se obtiene el soporte para un nuevo framework.
              <span class="fragment"><strong>Mentira</strong>, se necesita un poco
              más de trabajo definiendo rutas, vistas, modelos, etc.</span>
            </p>
          </div>

          <div class="fragment">
            <h2>Storage</h2>
            <p>Es la interfaz entre la aplicación y los modelos. Aquí es donde se agrega soporte para nuevos ORMs</p>
          </div>

          <div class="fragment">
            <h2>Configurable</h2>

            <pre><code class="python">
SOCIAL_AUTH_STRATEGY = 'social.strategies.django_strategy.DjangoStrategy'
SOCIAL_AUTH_STORAGE = 'social.apps.django_app.default.models.DjangoStorage'
            </code></pre>
          </div>
        </section>

        <section>
          <section>
            <h1>Extendiendo Python Social Auth (Tornado)</h1>
            <div class="fragment">
              <h2>Strategy</h2>
              <pre id="strategy-code"><code data-trim class="python">
def redirect(self, url):
    ...

def get_setting(self, name):
    ...

def html(self, content):
    ...

def request_data(self, merge=True):
    ...

def request_host(self):
    ...

def session_get(self, name, default=None):
    ...

def session_set(self, name, value):
    ...

def session_pop(self, name):
    ...

def build_absolute_uri(self, path=None):
    ...
              </code></pre>
            </div>
          </section>

          <section>
            <h1>Handlers</h1>
            <pre><code data-trim class="python">
class AuthHandler(tornado.web.RequestHandler):
    def get(self, backend):
        self._auth(backend)

    def post(self, backend):
        self._auth(backend)

    @strategy("complete")
    def _auth(self, backend):
        do_auth(self.strategy)
            </code></pre>
          </section>

          <section>
            <h1>Rutas</h1>
            <pre><code data-trim class="python">
SOCIAL_AUTH_ROUTES = [
    url(r"/login/(?P&lt;backend&gt;[^/]+)/?", AuthHandler, name="begin"),
    url(r"/complete/(?P&lt;ackend&gt;^/]+)/?", CompleteHandler, name="complete"),
    url(r"/disconnect/(?P&lt;ackend&gt;^/]+)/?", DisconnectHandler,
        name="disconnect"),
    url(r"/disconnect/(?P&lt;ackend&gt;^/]+)/(?P&lt;association_id&gt;\d+)/?",
        DisconnectHandler, name="disconect_individual"),
]
            </code></pre>
          </section>

          <section>
            <h1>Decorators</h1>
            <pre><code data-trim class="python">
def strategy(redirect_uri=None):
    def decorator(func):
        @wraps(func)
        def wrapper(self, backend, *args, **kwargs):
            uri = redirect_uri
            if uri and not uri.startswith('/'):
                uri = self.reverse_url(uri, backend)
            self.strategy = load_strategy(self,
                                          backend=backend,
                                          redirect_uri=uri, *args, **kwargs)
            return func(self, backend, *args, **kwargs)
        return wrapper
    return decorator
            </code></pre>
          </section>

        </section>

        <section>
          <h1>Tornado is alive!</h1>
          <img src="img/zombie-hand.png"/>
        </section>

        <section>
          <h1>TL;DR</h1>
        </section>
      </div>

      <div class="flow-controls">
        <a title="Back" href="javascript:void(function(){ Reveal.left(); }());">←</a>
        <a title="Down" href="javascript:void(function(){ Reveal.down(); }());">↓</a>
        <a title="Up" href="javascript:void(function(){ Reveal.up(); }());">↑</a>
        <a title="Forward" href="javascript:void(function(){ Reveal.right(); }());">→</a>
      </div>
    </div>

    <script src="js/head.min.js"></script>
    <script src="js/classlist.js"></script>
    <script src="js/reveal.min.js"></script>
    <script src="js/less.js"></script>
    <script>
      Reveal.initialize({
        width: '100%',
        height: '100%',
        margin: 0.1,
        minScale: 0.2,
        maxScale: 1.0,
        controls: false,
        progress: true,
        history: true,
        center: true,
        transition: Reveal.getQueryHash().transition || 'default',
        dependencies: [{
          src: 'js/plugin/highlight/highlight.js',
          async: true,
          callback: function() {
            hljs.initHighlightingOnLoad();
          }
        }]
      });

      Reveal.addEventListener('fragmentshown', function (event) {
        if (event.fragment.nodeName == 'IMG' && event.fragment.parentNode.className.indexOf('backends') >= 0) {
          var img = event.fragment;
              // x = document.body.offsetHeight - img.height - 100,
              // y = document.body.offsetWidth - img.width - 100,
              // randomx = Math.floor(Math.random() * x + 1) + 40,  // 40 por el titulo
              // randomy = Math.floor(Math.random() * y + 1);
          // img.style.float = 'left';
          // img.style.position = 'absolute';
          // img.style.top = randomx + 'px';
          // img.style.left = randomy + 'px';
          img.className = '';
        }
      });
    </script>
  </body>
</html>
